<?xml version="1.0" encoding="UTF-8"?>
<topic template="Default" lasteditedby="Kot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="helpproject.xsd">
  <title translate="true">Inline</title>
  <body>
    <header>
      <para style="margin-bottom:2px; margin-left:4px;"><anchor id="hdr" styleclass="Heading1"></anchor><text style="font-family:Verdana; font-size:10pt; font-weight:bold; color:#000000;" translate="true">Inline</text></para>
    </header>
    <para><table rowcount="1" colcount="1" style="width:100%; cell-padding:1px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; border-collapse:collapse; cell-border-width:0px; border-style:none; background-color:#99ccff; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td style="vertical-align:middle;">
          <para><text style="font-family:Verdana; font-size:8pt; font-style:italic; color:#000000;" translate="true">C++ Бъерн Страуструп</text></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#fefefe; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; font-size:18pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#990000;" translate="true">Ключевое слово inline</text></para>
    <para style="text-align:justify; text-indent:38px; margin-top:6px; margin-left:79px; background-color:#fefefe;"><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">При разработке С99 было добавлено ключевое слово</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">, которое применяется к функциям. Ставя</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">в начале объявления функции, вы предлагаете компилятору оптимизировать вызовы к этой функции. Обычно это означает, что при компиляции код этой функции будет вставляться на месте вызовов. Однако ключевое слово</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">является всего лишь запросом к компилятору и может быть проигнорировано. В С99 особо отмечено, что использование</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&quot;предполагает, что вызовы функции должны быть максимально быстрыми&quot;. Спецификатор</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">также поддерживается в языке C++, и синтаксис С99 для этого ключевого слова совместим с C++.</text></para>
    <para style="text-align:justify; text-indent:38px; margin-top:6px; margin-left:79px; background-color:#fefefe;"><anchor id="1" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">Чтобы создать</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; font-size:12pt; font-style:italic; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">встраиваемую функцию</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://lord-n.narod.ru/download/books/walla/programming/Spr_po_C/11/1103.htm#11" styleclass="Normal" style="font-family:&apos;Courier New&apos;; font-size:9pt; text-decoration:none; vertical-align:super; color:#000000;" translate="true">[1]</link><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">, перед ее определением поставьте ключевое слово</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">. Например, в следующей программе оптимизируются вызовы функции</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">max()</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">#include &lt;stdio.h&gt;</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">inline int max(int a, int b)</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true"> &#160;return a &gt; b ? a : b;</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">int main(void)</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true"> &#160;int x=5, y=10;</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true"> &#160;printf(&quot;Наибольшим из чисел %d и %d является: %d\n&quot;, x, y, max(x, y));</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true"> &#160;return 0;</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">}</text></para>
    <para style="text-align:justify; text-indent:38px; margin-top:6px; margin-left:79px; background-color:#fefefe;"><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">При типичной реализации</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">предшествующая программа эквивалентна следующей:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">#include &lt;stdio.h&gt;</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">int main(void)</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true"> &#160;int x=5, y=10;</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true"> &#160;printf(&quot;Наибольшим из чисел %d и %d является: %d\n&quot;, x, y, (x&gt;y ? x : y));</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true"> &#160;return 0;</text></para>
    <para styleclass="Normal" style="margin-left:98px; line-height:1.0; background-color:#fefefe; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#461b7e;" translate="true">}</text></para>
    <para style="text-align:justify; text-indent:38px; margin-top:6px; margin-left:79px; background-color:#fefefe;"><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">Причина, по которой встраиваемым функциям придается такое большое значение, состоит в том, что они помогают создавать более эффективный код, поддерживая при этом структурированный, функционально-ориентированный подход. Как вы знаете, каждый раз при вызове функции механизм ее вызова и возврата требует значительного количества ресурсов. Обычно при вызове функции ее аргументы заталкиваются в стек, содержимое различных регистров заносится в память, а затем при возврате функции содержимое этих регистров восстанавливается. Беда в том, что на эти операции требуется время. Однако, если код функции подставляется вместо вызова, такие операции уже не нужны. Впрочем, хотя такие подстановки функции и способствуют ускорению выполнения, но они приводят к увеличению размера кода из-за дублирования кода функции. По этой причине лучше всего использовать</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">только с очень небольшими функциями, т.е. подставлять код только маленьких функций. Кроме того, хорошо было бы применять это ключевое слово только к тем функциям, которые существенно влияют на производительность программы.</text></para>
    <para style="text-align:justify; text-indent:38px; margin-top:6px; margin-left:79px; background-color:#fefefe;"><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; font-size:12pt; text-decoration:underline; vertical-align:baseline; color:#000000;" translate="true">Помните</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">: хотя</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:&apos;Courier New&apos;; text-decoration:none; vertical-align:baseline; color:#007a00;" translate="true">inline</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">обычно приводит к подстановке кода функции на месте ее вызова, компилятор может проигнорировать этот запрос или использовать некоторые другие средства оптимизации вызовов функции.</text></para>
    <para style="text-align:justify; text-indent:38px; margin-top:6px; margin-left:79px; background-color:#fefefe;"><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000;" translate="true">&#32;</text></para>
    <para style="margin-top:6px; margin-left:79px; line-height:1.82; background-color:#fefefe;"><text style="font-family:Arial; font-size:9pt; color:#000000; background-color:#ffffff;" translate="true">Чтобы реализация вызова подстановкой стала возможна даже для не слишком развитых систем программирования, нужно, чтобы не только определение, но и описание функции-подстановки находилось в текущей области видимости</text></para>
    <para><line style="height:2px;" /></para>
    <para styleclass="Normal" style="margin-top:6px; margin-bottom:6px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:8pt; font-style:italic; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> Copyright ©2011 </text><text styleclass="Normal" style="font-family:Verdana; font-size:8pt; font-style:italic; text-decoration:none; vertical-align:baseline; color:#0000ff;" translate="true">C++</text><text styleclass="Normal" style="font-family:Verdana; font-size:8pt; font-style:italic; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">. All Rights Reserved.</text></para>
  </body>
</topic>
