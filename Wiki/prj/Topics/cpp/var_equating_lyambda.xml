<?xml version="1.0" encoding="UTF-8"?>
<topic template="Default" lasteditedby="Kot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">Переменная = лямбда функция</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">Переменная = лямбда функция</text></para>
    </header>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Лямбда функцию можно сохранить в переменную вместе с</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">// &#160;захваченными лямбдой внешними переменными</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//По сути эта переменная будет объектом класса с приватными захваченными переменными</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">// &#160;и перегруженным оператором () то есть функтором</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//При этом захваченные переменные по значению будут актуальны всегда</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">// &#160;а захваченные по ссылке будут актуальны пока живы переменные</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">// &#160;на которые указывают эти ссылки</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">#include</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#a31515;" translate="true">&lt;functional&gt;</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">using</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#0080c8;" translate="true">std</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">::</text><text style="font-family:Consolas; font-size:12pt; color:#0080c8;" translate="true">tr1</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">::</text><text style="font-family:Consolas; font-size:12pt; color:#0080c8;" translate="true">function</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">;</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Описываем шаблон функции которая может принимать в качестве </text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">// &#160;параметра функцию или функтор или ЛЯМБДА ФУНКЦИЮ (как например функция std::sort)</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">template</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&lt;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">class</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#0080c8;" translate="true">L</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&gt;</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">void</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#880000;" translate="true">f</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">x</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">, </text><text style="font-family:Consolas; font-size:12pt; color:#0080c8;" translate="true">L</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &amp;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">l</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> )</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">bool</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">res</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> = </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">l</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">x</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">);</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Пример</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#030003;" translate="true">function</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&lt;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">bool</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">)&gt; </text><text style="font-family:Consolas; font-size:12pt; color:#880000;" translate="true">GetLambda</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">()</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">par1</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> = 1;</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">par2</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> = 2;</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#030003;" translate="true">function</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&lt;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">bool</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">)&gt; </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">myLambda</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> = </text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Присваиваем лямбду переменной</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Ниже вместо функтора или указателя на функцию мы определяем лямбда функцию</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//[захватываемые внешние переменные](параметры) -&gt; ТИП &#160; возвращяемого значения</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160;[</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">par1</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">, &amp;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">par2</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">](</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">x</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">) -&gt; </text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">bool</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">// еcли -&gt; ТИП &#160; &#160;не указывать то возвращаемое значение void</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160;{</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Тело лямбда функции такое же как и обычная функция</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">p1</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> = </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">par1</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">; </text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Все в порядке</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">p2</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> = </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">par2</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">; </text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Указывает хер знает куда</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">return</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">true</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">;</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160;};</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">return</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">myLambda</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">;</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Переменные par1 и par2 уничтожены</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">void</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#880000;" translate="true">main</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">()</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#030003;" translate="true">function</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">&lt;</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">bool</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><text style="font-family:Consolas; font-size:12pt; color:#0000ff;" translate="true">int</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">)&gt; </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">myLambda</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> = </text><text style="font-family:Consolas; font-size:12pt; color:#880000;" translate="true">GetLambda</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(); </text><text style="font-family:Consolas; font-size:12pt; color:#008000;" translate="true">//Получили лямбду то есть объект класса функтора</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#880000;" translate="true">f</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(13, </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#808080;" translate="true">myLambda</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">);</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="text-indent:0px; margin-right:0px; margin-left:13px; tabstops:none;"></para>
  </body>
</topic>
