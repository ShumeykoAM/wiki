<?xml version="1.0" encoding="UTF-8"?>
<topic template="Default" lasteditedby="Kot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="helpproject.xsd">
  <title translate="true">GDI</title>
  <body>
    <header>
      <para style="margin-bottom:2px; margin-left:4px;"><anchor id="hdr" styleclass="Heading1"></anchor><text style="font-family:Verdana; font-size:10pt; font-weight:bold; color:#000000;" translate="true">GDI</text></para>
    </header>
    <para><table rowcount="1" colcount="1" style="width:100%; cell-padding:1px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; border-collapse:collapse; cell-border-width:0px; border-style:none; background-color:#99ccff; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td style="vertical-align:middle;">
          <para><text style="font-family:Verdana; font-size:8pt; font-style:italic; color:#000000;" translate="true">C++ Бъерн Страуструп</text></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">/*</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">Для рисования GDI необходимо</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160;1. Перья (тип HPEN) используются для вывода линий или контуров.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160; &#160;Они имеют толщину, цвет и стиль.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160;2. Кисти (тип HBRUSH) применяются для заполнения замкнутых объектов.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160; &#160;Они имеют цвет, стиль и могут даже представлять собой растровые изображения.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160;3. Контекст графического устройства (тип HDC) в котором будем рисовать.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160;</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160;И так: создаем кисть и перо, получаем контекст граф. устр-ва, выбираем созданные</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160; &#160;кисть и перо, и с помощью соответствующих функций рисуем примитивы</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true"> &#160; &#160; &#160;(точки, линии, прямоугольники, овалы и многоугольники).</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">?</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">*/</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">&#32;</text></para>
    <para styleclass="Normal" style="text-align:center; margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-size:12pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000099;" translate="true">Краткое неформальное введение в графику Windows</text></para>
    <para styleclass="Normal" style="text-align:center; margin-top:11px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Вежневец Владимир</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tthFtNtAAB" styleclass="Normal" style="font-size:7pt; font-weight:bold; text-decoration:none; vertical-align:super; color:#000000;" translate="true">1</link></para>
    <para styleclass="Normal" style="margin-top:11px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#ff8a21;" translate="true">Аннотация</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Целью этого документа является ознакомление новичков с тем, как устроена 2D графика в Windows и как с помощью имеющихся средств можно делать простые, но полезные вещи.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">К данному тексту прилагаются три программки с исходным кодом под Visual C++ 6.0, Delphi 5 и CBuilder 5, в которых дан &quot;скелет&quot; приложения умеющего загрузить, показать, обработать и сохранить изображение в формате bmp.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-size:12pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000099;" translate="true">Содержание</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc1" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000099; background-color:#ffffff;" translate="true">1. Цель этого документа</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc2" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000099; background-color:#ffffff;" translate="true">2. Устройство графики в Windows</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc2.1" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">2.1 Graphics Device Interface и Device Context</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc2.2" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">2.2 Как рисовать в Device Context?</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc2.3" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">2.3 Как рисовать в окно приложения?</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc2.4" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">2.4 Когда рисовать в окно приложения? WM_PAINT - что это?</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc2.5" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">2.5 Как БЫСТРО рисовать в Device Context?</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc2.6" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">2.6 Как загрузить и вывести на экран изображение?</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc2.7" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">2.7 Как нарисовать что-либо на изображении?</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc3" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">Надстройки над GDI</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc3.1" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">3.1 MFC надстройка над GDI</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc3.2" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">3.2 VCL надстройка над GDI</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc4" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">4. Как (относительно) быстро обрабатывать изображения?</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc4.1" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">4.1 Быстрый способ доступа к пикселям в GDI и MFC</link></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true"> &#160; &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tth_sEc4.2" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">4.2 Быстрый способ доступа к пикселям в VCL</link></para>
    <para styleclass="Normal" style="margin-top:11px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC1" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">1</text><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#ff8a21;" translate="true"> &#160;Цель этого документа</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Целью этого документа, как и первого (и частично второго) задания в курсе &quot;Машинная графика&quot; для студентов второго курса ВМиК МГУ является ознакомление новичков с тем, как устроена 2D графика в Windows и как с помощью имеющихся средств можно делать простые, но полезные вещи.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Чего мы коснемся:</text></para>
    <list id="2" level="1" type="ul" listtype="bullet" formatstring="&#111;" format-charset="RUSSIAN_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="text-indent:-13px; margin-left:136px; line-height:1.0; page-break-after:auto; tabstops:none; font-family:&apos;Courier New&apos;; font-size:10pt; color:#000000;">
      <li styleclass="Normal" style="text-indent:-13px; margin-left:136px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Устройство графики в Windows;</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:136px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Как рисовать простые вещи (линии, геометрический фигуры, текст) с помощью функций WinAPI</text><text style="font-family:Arial; font-size:10pt; color:#000000;" translate="true">&#32;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#tthFtNtAAB" styleclass="Normal" style="font-size:8pt; text-decoration:none; vertical-align:super; color:#000000;" translate="true">2</link><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">;</text></li>
    </list>
    <para styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:136px; line-height:1.0; page-break-after:auto; tabstops:none;"><anchor id="TTHFREFAAB" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor></para>
    <list id="2" level="1" type="ul" listtype="bullet" formatstring="&#111;" format-charset="RUSSIAN_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:136px; line-height:1.0; page-break-after:auto; tabstops:none; font-family:&apos;Courier New&apos;; font-size:10pt; color:#000000;">
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:136px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Как загрузить, отобразить и обработать изображение с помощью функций WinAPI;</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:136px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">MFC надстройка над WinAPI;</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-bottom:6px; margin-left:136px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">VCL надстройка над WinAPI;</text></li>
    </list>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true">В качестве приложения к данному тексту выступают три программки с исходным кодом под Visual C++ 6.0 (</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/VisualC.zip" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">MFC_GML3</link><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true">), Delphi 5 (</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/Delphi.zip" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">DelphiBasis</link><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true">) и CBuilder 5 (</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/CBuilder.zip" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000; background-color:#ffffff;" translate="true">SDIApp</link><text style="font-family:Arial; font-size:10pt; color:#000000; background-color:#ffffff;" translate="true">), в которых дан &quot;скелет&quot; приложения, умеющего загрузить, показать, обработать и сохранить изображение в формате bmp.</text></para>
    <para styleclass="Normal" style="margin-top:11px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC2" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">2</text><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#ff8a21;" translate="true"> &#160;Устройство графики в Windows</text></para>
    <para styleclass="Normal" style="margin-top:11px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC2.1" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">2.1</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Graphics Device Interface и Device Context</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Не стану углубляться в теорию строения Windows и ее графической подсистемы (литературы на эту тему написано вполне достаточно), постараюсь коротко изложить некий минимум знаний, который понадобится при программировании простейшей графики в Windows. При этом я постараюсь также дать понимание что и как устроено (пускай на простом уровне).</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Во-первых, в Microsoft Windows существует несколько средств для вывода графической информации, включая DirectDraw, OpenGL, GDI и т.д. Мы рассмотрим GDI (Graphics Device Interface) - подсистему Windows, ответственную за вывод графики и текста на дисплей и принтер. Именно она занимается выводом большинства &quot;окошек&quot;, которые и составляют то, что видит пользователь Windows на экране. Она является базовым и, пожалуй, простейшим способом вывода графики в Windows.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">С графикой Windows с помощью GDI неразрывно связано понятия контекста устройства (device context). Контекст устройства (DC) - это структура данных, содержащая информацию о параметрах и атрибутах вывода графики на устройство (например, дисплей или принтер). Такая информация, в частности, включает в себя: палитру устройства, определяющую набор доступных цветов; параметры пера для черчения линий; параметры кисти для закраски и заливки; параметры шрифта, использующегося для вывода текста.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">В GDI существуют пять типов контекста устройства - связанный с дисплеем (Display DC), принтером (Printer DC), контекст виртуального устройства в памяти (Memory DC), контекст метафайла (Metafile DC) и специальный вид контекста - информационный (Information DC).</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Первые четыре типа контекста устройства - display, printer, memory и metafile предоставляют унифицированный интерфейс для вывода графической информации на разнотипные устройства, освобождая приложение (и его разработчика) от необходимости заботится о том, куда именно производится вывод графики. Информационный контекст для вывода графики не используется, он служит исключительно для получения информации о параметрах и поддерживаемых режимах устройства, с которым связан.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">В чем отличие первых четырех типов контекста? Это можно понять из их названий - Display DC служит для вывода на экран, Printer DC для печати на принтер или графопостроитель, Memory DC служит для создания растровых изображений в памяти с возможностью быстрого их копирования в другие типы контекстов (и обратно), Metafile DC нужен для вывода графики в</text><text style="font-family:Arial; font-size:10pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-style:italic; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">метафайл</text><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">. Метафайл - это хранилище последовательности команд GDI, каждая из которых описывает одну графическую функцию. В отличие от растровых файлов, хранящих графическую информацию непосредственно в виде массива пикселов, метафайл ее хранит в виде последовательности команд, которая создает результирующий рисунок.</text></para>
    <para styleclass="Normal" style="margin-top:11px; margin-bottom:4px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC2.2" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">2.2</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Как рисовать в Device Context?</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="SEQGDI_DRAW" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Для вывода графической информации существует набор функций, которые можно разделить на несколько категорий:</text></para>
    <list id="2" level="1" type="ul" listtype="bullet" formatstring="&#111;" format-charset="RUSSIAN_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="text-indent:-13px; margin-left:140px; line-height:1.0; page-break-after:auto; tabstops:none; font-family:&apos;Courier New&apos;; font-size:10pt; color:#000000;">
      <li styleclass="Normal" style="text-indent:-13px; margin-left:140px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Методы рисования линий: LineTo, MoveTo, Polyline, Arc, ArcTo, PolyBezier, и др.</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:140px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Методы рисования замкнутых фигур: Ellipse, Rectangle, Polygon, Pie, Chord и др.</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:140px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Методы вывода текста: TextOut, DrawText и т.д.</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-bottom:6px; margin-left:140px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Функции работы с растровым изображением: GetPixel, SetPixel, FloodFill, BitBlt и т.д.</text></li>
    </list>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Существует отдельная категория функций работы с DC по переключению режимов и установке параметров вывода графической информации. Часть из них устанавливается напрямую через определенные функции (например, SetBkColor), часть - с помощью специальных графических объектов:</text></para>
    <list id="2" type="ul" listtype="bullet" formatstring="&#111;" format-charset="RUSSIAN_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:80px; line-height:1.0; page-break-after:auto; tabstops:none; font-family:&apos;Courier New&apos;; font-size:10pt; color:#000000;">
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:80px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">перо (pen)</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-left:135px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">- задает режим вывода линий (цвет, толщина, стиль);</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:80px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">кисть (brush)</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-left:135px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">- регулирует режим закраски фигур (цвет, стиль);</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:80px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">шрифт (font)</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-left:135px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">- задает свойства шрифта, которым выводится текст;</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:80px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">палитра (palette)</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-left:135px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">- задает набор используемых в DC цветов;</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-top:6px; margin-left:80px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">область (region)</text></li>
      <li styleclass="Normal" style="text-indent:-13px; margin-left:135px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">- используются для задания clipping regions - областей отсечения, вне которых вывод графики блокируется.</text></li>
    </list>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Работа с графическими объектами производится с помощью их дескрипторов (handles) - HDC, HPEN, HBRUSH, HFONT и т.д. Создание и удаление объектов производится с помощью соответствующих функций - например, объект pen создается с помощью CreatePen, удаляется с помощью DeleteObject. Режимы, задающиеся через графические объекты, переключаются с помощью создания новых объектов и указания контексту (DC) использовать их для вывода графики. Это делается помощью функции SelectObject:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">//hdc - дескриптор контекста устройства</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">HPEN hWhitePen, hBlackPen, hOldPen;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">HBRUSH hBlackBrush, hOldBrush;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hWhitePen = CreatePen(PS_SOLID, 1, RGB(255, 255, 255));</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hBlackPen = CreatePen(PS_SOLID, 1, RGB(0, 0, 0));</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hBlackBrush = CreateSolidBrush(RGB(0, 0, 0));</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // нарисовать белый квадрат</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hOldPen = SelectObject(hdc, hWhitePen);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">MoveTo(hdc, 10, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">LineTo(hdc, 100, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">LineTo(hdc, 100, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">LineTo(hdc, 10, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">LineTo(hdc, 10, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // нарисовать черную окружность</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">SelectObject(hdc, hBlackPen);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hOldBrush = SelectObject(hdc, hBlackBrush);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Ellipse(hdc, 10, 10, 100, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // вернуть старый объекты pen и brush в DC</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">SelectObject(hdc, hOldPen);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">SelectObject(hdc, hOldBrush);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // освободить ресурсы</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">DeleteObject(hWhitePen);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">DeleteObject(hBlackPen);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">DeleteObject(hBlackBrush);</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">При выборе нового объекта через SelectObject в качестве возвращаемого значения передается дескриптор объекта, бывшего в использовании в DC раньше. Нужно иметь ввиду, что все создаваемые объекты нужно не забывать удалять их после использования. Более того, сам DC всегда создается с некоторыми объектами по умолчанию и при использовании определенных пользователем объектов через SelectObject нужно в конце работы произвести select объектов, которые были в DC изначально (см. пример выше).</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC2.3" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">2.3</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Как рисовать в окно приложения?</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Для того чтобы выводить графику в определенное окно вашего приложения нужно сделать буквально следующее:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Получить дескриптор DC, связанный с окном, в которое вы собираетесь рисовать с помощью функции GetDC(). Нарисовать все, что вы хотите, с помощью функций DC и в конце &quot;освободить&quot; контекст с помощью функции ReleaseDC().</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Пример:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">//hwnd - дескриптор окна, в которое будем рисовать</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">HDC hdc;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hdc = GetDC(hwnd);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">if ?(hdc)</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // рисуем что требуется</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; ...</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // освобождаем контекст</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; ReleaseDC(hwnd, hdc);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">else</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // обработка ошибки получения контекста</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Иным образом производится получение/освобождение дескриптора DC при обработке сообщения WM_PAINT - об этом в следующем разделе.</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC2.4" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">2.4</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Когда рисовать в окно приложения? WM_PAINT - что это?</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">При выводе графики в Windows есть некоторая тонкость, не всегда очевидная новичкам в программировании под среды с графическим интерфейсом. Казалось бы, если нужно что-то отрисовать в окне - получай его контекст и рисуй. Но не все так просто. Стоит свернуть окно или закрыть его часть другим окном - все, что было нарисовано, пропадет.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Дело в том, что Windows не хранит содержимое клиентской части окна. К клиентской части окна относится ВСЕ, кроме заголовка окна и управляющих элементов (controls): меню, панелей инструментов (toolbar), кнопок и т.д. Приложение само должно позаботиться о том, чтобы отрисовывать свои данные в клиентской области, Windows лишь посылает ему уведомление когда это нужно сделать. Делается это посредством посылки окну сообщения WM_PAINT.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Все необходимые действия по полной перерисовке информации клиентской части окна должны вызываться при обработке события WM_PAINT. Важным понятием при обработке этого сообщения является</text><text style="font-family:Arial; font-size:10pt; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-style:italic; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">invalid rectangle</text><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">. Windows определяет invalid rectangle как наименьшую прямоугольную часть окна, которая была &quot;испорчена&quot; и должна быть перерисована заново. Когда система обнаруживает invalid rectangle в клиентской области окна, она генерирует сообщение WM_PAINT. В ответ на сообщение окно может получить структуру PAINTSTRUCT, которая среди прочего содержит координаты invalid rectangle. Это может пригодиться, если есть желание перерисовывать не все окно, а только ту область, что требуется.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">При обработке WM_PAINT должна быть вызвана функция BeginPaint, которая снова делает invalid rectangle `нормальным&apos;. Также BeginPaint возвращает дескриптор DC, который должен быть использован для перерисовки клиентской части окна. Нужно иметь в виду, что при обработке WM_PAINT дескриптор DC окна должен быть получен именно с использованием BeginPaint, а освобожден EndPaint, в то время как во всех других случаях отрисовки нужно использовать другие функции (например, GetDC/ReleaseDC). Если invalid rectangle не делается &quot;нормальным&quot; во время обработки этого события (с помощью BeginPaint или ValidateRect), Windows будет слать WM_PAINT окну постоянно.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Пример обработки WM_PAINT:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">//hwnd - дескриптор окна, в которое будем рисовать</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">HDC &#160; &#160; &#160; &#160; hdc;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">PAINTSTRUCT PaintStruct;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hdc = BeginPaint(hwnd, &amp;PaintStruct);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">if ?(hdc)</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // рисуем что требуется</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; ...</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // освобождаем контекст</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; EndPaint(hwnd, &amp;PaintStruct);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">else</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // обработка ошибки получения контекста</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC2.5" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">2.5</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Как БЫСТРО рисовать в Device Context?</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">С каждым DC, предназначенным для графического вывода, связан графический объект bitmap (растровое изображение), который хранит массив пикселей, выводимых на устройство. Для того, чтобы быстро переместить графические данные с одного контекста на другой, можно не повторять все действия по отрисовке, а просто скопировать данные связанного с контекстом bitmap. Для этого даны специальные функции быстрого копирования пикселей (BitBlt, StretchBlt).</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Зачем это может быть нужно? Дело в том, что если вы часто рисуете достаточно сложную изменяющуюся картинку средствами GDI, сами операции рисования начинают занимать заметное для пользователя время и возникает неприятный эффект мерцания изображения - когда часть картинки уже перерисовалась, а часть еще осталась старой. Для того, чтобы избежать подобного эффекта новая картинка может создаваться в виртуальном DC в памяти, и потом быстро переносится на экран функциями копирования bitmap.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Пример:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// hdc - дескриптор контекста устройства для вывода</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// iWidth, iHeight - размеры окна вывода</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">HDC hMemDC;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hMemDC = CreateCompatibleDC(hdc);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">if ?(hMemDC)</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;// рисуем все что требуется</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;...</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;// быстро копируем результат отрисовки</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;BitBlt(hdc, 0, 0, iWidth, iHeight, hMemDC, 0, 0, SRCCOPY);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;// освобождаем контекст</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;DeleteDC(hMemDC);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">else</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;// обработка ошибки получения контекста</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC2.6" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">2.6</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Как загрузить и вывести на экран изображение?</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Пользуясь базовыми функциями WinAPI, это к сожалению не так-то просто. Никаких встроенных функций по загрузке изображения из bmp файла не предусмотрено, поэтому требуется самостоятельно писать функцию загрузки. Эта функциональность уже тысячу раз реализована, одна из реализаций предлагается вам в примере, который прилагается к данному тексту.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">В принципе, если вы не собираетесь выводить загружаемое растровое изображение на экран (а, скажем, только обрабатывать и сохранять), то его можно хранить в совершенно произвольных собственных структурах данных. Однако, если вы хотите иметь возможность быстро вывести ваше изображение на экран, или рисовать в нем средствами GDI, придется хранить его определенным образом. Потребуется создать графический объект bitmap, соответствующий параметрам файла bmp, и загрузить в него данные из файла (пиксели). Пример, как это сделать, содержится в классе DSimpleBitmap в примере MFC_GML3.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Для того, чтобы уметь быстро выводить загруженное изображение на экран, требуется сделать следующее - с помощью функции SelectObject привязать к созданному заранее memory DC загруженный bitmap (вместо default bitmap, создающегося вместе с контекстом) и затем функцией копирования битов вывести в дисплейный контекст, связанный с вашим окном. Пример:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// hdc - дескриптор контекста устройства для вывода</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// iWidth, iHeight - размеры окна вывода</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// hBitmap - дескриптор изображения для отрисовки</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">HDC &#160; &#160; hMemDC;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">HBITMAP hOldBitmap;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hMemDC = CreateCompatibleDC(hdc);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">if (hMemDC)</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // рисуем все что требуется</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; hOldBitmap = SelectObject(hMemDC, hBitmap);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // копируем биты</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; BitBlt(hdc, 0, 0, iWidth, iHeight, hMemDC, 0, 0, SRCCOPY);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // возвращаем старый bitmap</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; SelectObject(hMemDC, hOldBitmap);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // освобождаем контекст</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; DeleteDC(hMemDC);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">else</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; // обработка ошибки получения контекста</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Не забудьте уничтожить все временные объекты, которые создавались (в данном случае - это memory DC). Не забудьте также перед тем как будете уничтожать memory DC, выбрать в него (через SelectObject) объект bitmap, который был создан вместе с контекстом, в противном случае произойдет утечка ресурсов.</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC2.7" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">2.7</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Как нарисовать что-либо на изображении?</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Есть как минимум два способа. Первый - это получить указатель на пиксели растрового изображения (вариант как это сделать см. секцию</text><text style="font-family:Arial; font-size:10pt; color:#000000;" translate="true">&#32;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#seq::gdi_access" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">4.1</link><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">) и менять их напрямую. Второй - это рисовать на изображении с помощью функций GDI. Для реализации второго варианта нужно создать DC, связать с ним bitmap, на котором хотите рисовать, и затем использовать стандартные функции вывода графики. Пример:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// hdc - дескриптор некоторого контекста устройства</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// hBitmap - дескриптор изображения</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">HBITMAP hOldBitmap;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// связываем bitmap с контекстом</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">hOldBitmap = SelectObject(hdc, hBitmap);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// рисуем круг</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Ellipse(hdc, 10, 10, 100, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// возвращаем старый bitmap</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">SelectObject(hdc, hOldBitmap);</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Имейте в виду, объект bitmap может быть одновременно связан только с одним DC.</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC3" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">3</text><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#ff8a21;" translate="true"> &#160;Надстройки над GDI</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Для облегчения программирования под WinAPI было создано некоторое количество объектно-ориентированных надстроек для него. В числе самых распространенных - Microsoft Foundation Class Library (MFC) от Microsoft (используемая в MS Visual Studio) и Visual Components Library (VCL) от Borland (используемая в Delphi и C++ Builder). Обе этих библиотеки уже достаточно пожилые, но тем не менее все еще широко распространенные.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">С появлением этих (и других) надстроек, люди крайне редко по-прежнему программируют чисто под WinAPI (что в общем-то понятно).</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-bottom:5px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC3.1" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">3.1</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;MFC надстройка над GDI</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="SEQMFC_DRAW" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Для облегчения работы с функциями и структурами GDI в MFC создан набор классов, являющихся обертками для WinAPI структур и дескрипторов.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">К их числу относятся CDC, CPen, CBitmap, CFont, CBrush и т.д. Работа с ними практически идентична работе с дескрипторами этих объектов, но несколько удобнее.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Что значит обертками? Это значит, что CPen внутри себя содержит HPEN (доступный как свойство класса) и просто берет на себя некоторые заботы по его созданию, удалению и работе с ним. Похожим образом организованы все обертки.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">CDC - это абстрактный базовый класс, у которого есть несколько реализаций - CPaintDC, CClientDC, CWindowDC, CMetaFileDC, каждая должна использоваться в определенных ситуациях.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Работа с графическими фукнциями GDI с использованием MFC несколько упрощается (сравните с примером в разделе</text><text style="font-family:Arial; font-size:10pt; color:#000000;" translate="true">&#32;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#seq::gdi_draw" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">2.2</link><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">):</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">//pDC - указатель на CDC (обертку дескриптора контекста устройства)</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">CPen &#160;WhitePen(PS_SOLID, 1, RGB(255, 255, 255)),</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;BlackPen(PS_SOLID, 1, RGB(0, 0, 0)),</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; *pOldPen;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">CBrush &#160;BlackBrush(RGB(0, 0, 0)),</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160; *pOldBrush;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// нарисовать белый квадрат</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pOldPen = pDC-&gt;SelectObject(&amp;WhitePen);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;MoveTo(10, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;LineTo(100, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;LineTo(100, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;LineTo(10, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;LineTo(10, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// нарисовать черную окружность</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;SelectObject(&amp;BlackPen);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pOldBrush = pDC-&gt;SelectObject(&amp;BlackBrush);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;Ellipse(10, 10, 100, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// вернуть старый объекты pen и brush в DC</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;SelectObject(pOldPen);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">pDC-&gt;SelectObject(pOldBrush);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">// ресурсы будут освободены при уничтожении объектов CPen</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">К сожалению, никаких средств для загрузки bmp файлов в CBitmap и для простой отрисовки CBitmap в DC в MFC не предоставлено - приходится пользоваться теми же средствами, что и при работе с WinAPI. Обработка WM_PAINT производится практически идентично, за исключением того, что в MFC существует специальный тип CPaintDC, в конструктор и деструктор которого инкапсулированы (встроены) вызовы BeginPaint/EndPaint. Обработка события выглядит следующим образом:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">void CImageView::OnPaint()</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">{ &#160;?</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // Подразумевается, что это функция-член окна,</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">тогда this</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // указывает на CWnd - обертку дескриптора данного окна</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> CPaintDC dc(this);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // рисуем что требуется</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> ...</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // контекст освободится сам при выходе из функции</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> // (при уничтожении объекта dc)</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC3.2" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">3.2</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;VCL надстройка над GDI</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Visual Components Library (VCL) от Borland делает гораздо более длинный шаг в сторону упрощения работы с графикой.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">В этой библиотеке введен класс TCanvas, также являющийся оберткой для HDC (HDC доступен через свойство Handle), но представляющий более высокоуровневый интерфейс для работы с графикой. Переключение режимов производится путем модификации свойств класса TCanvas - Pen, Font, Brush, TextFlags и т.д., что делает переключение режимов рисования значительно проще и прозрачнее и избавляет разработчика от чехарды с SelectObject/GetCurrentObject/DeleteObject. Операции GetPixel/PutPixel реализованы как доступ к двумерному массиву Pixels (что не делает работу с ними более быстрой).</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Canvas связан со всеми компонентами VCL, у которых есть клиентская часть, а также с классом TBitmap. Стандартные компоненты Windows такие как кнопки, списки и т.д. Canvas не имеют, так как их полностью отрисовывает Windows. Рисование на Canvas происходит путем вызова соответствующих функций-членов. Пример (сравните с</text><text style="font-family:Arial; font-size:10pt; color:#000000;" translate="true">&#32;</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#seq::gdi_draw" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">2.2</link><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">,</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.graphicon.ru/oldgr/courses/cg/library/windows/#seq::mfc_draw" styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">3.1</link><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">):</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;// AppForm - класс окна (TForm), в котором мы собираемся</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;// рисовать</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;// Нарисовать белый квадрат</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;Pen-&gt;Color = clWhite;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;MoveTo(10, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;LineTo(100, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;LineTo(100, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;LineTo(10, 100);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;LineTo(10, 10);</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;// Нарисовать черную окружность</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;Pen-&gt;Color = clBlack;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;Brush-&gt;Color = clBlack;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;AppForm-&gt;Canvas-&gt;Ellipse(10, 10, 100, 100);</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Обработка сообщения WM_PAINT происходит без дополнительной заботы о создании DC особым образом (CPaintDC или BeginPaint), просто нужно работать с Canvas перерисовываемого объекта.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Быстрое копирование из Canvas в Canvas осуществляется путем использования функции CopyRect, аналогичной BitBlt, StretchBits.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Загрузка изображения из файла и отображение на экране с использованием VCL значительно упрощается. Растровые изображения, иконки и метафайлы хранятся в соответствующих классах (TBitmap, TIcon, TMetaFile) - наследниках базового класса изображений TGraphic. Для облегчения работы с этими классами в VCL добавлен класс-контейнер TPicture, который может работать с любым из наследников TGraphic, реализуя функциональность загрузки/сохранения и копирования объекта в буфер обмена (clipboard).</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">В VCL существует еще один класс, облегчающий вывод графического изображения в окно - TImage. TImage - это компонент, содержащий некоторые свойства и параметры, задающие как именно будет отрисовываться изображение в окне приложения. Само изображение хранится в свойстве Picture класса TImage. Стоит иметь в виду, что при использовании TImage VCL полностью берет на себя обработку сообщения WM_PAINT. То есть все, что нарисовано на Canvas компонента TImage, автоматически отображается на экране, когда это требуется - достаточно нарисовать все что нужно один раз.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Загрузка и отображение растровой картинки с помощью TImage показана в примере SDIApp и DelphiBasis, прилагаемых к данному тексту.</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC4" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">4</text><text styleclass="Normal" style="font-weight:bold; text-decoration:none; vertical-align:baseline; color:#ff8a21;" translate="true"> &#160;Как (относительно) быстро обрабатывать изображения?</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">При написании фильтров для изображения требуется способ доступа к отдельным пикселям. Самый простой способ - сделать это с помощью функций GetPixel/SetPixel в WinAPI и MFC и с помощью двумерного массива TCanvas-&gt;Pixels в VCL. Однако так поступать не стоит, поскольку такой способ является чрезвычайно медленным.</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-bottom:5px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC4.1" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">4.1</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Быстрый способ доступа к пикселям в GDI и MFC</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="SEQGDI_ACCESS" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">При работе с функциями GDI напрямую, наиболее удобным представляется создание объекта bitmap, к пикселям которого можно обращаться напрямую. Делается это с помощью функции CreateDIBSection. Одним из выходных параметров этой функции является указатель на переменную, куда при создании bitmap будет помещен указатель на массив пикселей - ppvBits. Запомнив этот указатель, приложение получает прямой доступ к пикселям изображения. Обычно использующиеся true color изображения с глубиной цвета 24 bit хранят данные попиксельно в виде массива троек `BGR&apos; (каждый пиксель - три байта).</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Адрес пикселя с координатами (x, y) для изображений такого типа рассчитывается следующим образом:</text><text style="font-family:Arial; font-size:10pt; color:#000000;" translate="true">&#32;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><table rowcount="1" colcount="2" style="width:100%; cell-padding:1px; cell-spacing:2px; page-break-inside:auto; border-width:0px; border-spacing:2px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td style="vertical-align:middle;">
          <para styleclass="Normal" style="text-align:center; margin-left:127px; line-height:1.0; page-break-after:auto; tabstops:none;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:1px; cell-spacing:2px; page-break-inside:auto; border-width:0px; border-spacing:2px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
            <tr style="vertical-align:top">
              <td style="vertical-align:middle;">
                <para style="text-align:center;"><text styleclass="Normal" style="font-family:Consolas; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">ppvBits + y * iBytesPerLine + x * 3</text></para>
              </td>
            </tr>
          </table></para>
        </td>
        <td style="vertical-align:middle; width:1%;">
          <para><text styleclass="Normal" style="font-family:Consolas; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">(1)</text></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Здесь iBytesPerLine - это длина строки изображения в байтах, которая отнюдь не всегда равна ширине изображения, умноженной на три. Для увеличения производительности работы с изображением адреса начал строк выравниваются по границе процессорного слова (4 байта), поэтому если ширина, умноженная на 3, не кратна четырем, каждая из строк дополняется несколькими дополнительными байтами . Рассчитать длину строки в байтах можно по следующей формуле:</text><text style="font-family:Arial; font-size:10pt; color:#000000;" translate="true">&#32;</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><anchor id="EQMEM" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><table rowcount="1" colcount="2" style="width:100%; cell-padding:1px; cell-spacing:2px; page-break-inside:auto; border-width:0px; border-spacing:2px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td style="vertical-align:middle;">
          <para styleclass="Normal" style="text-align:center; margin-left:116px; line-height:1.0; page-break-after:auto; tabstops:none;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:1px; cell-spacing:2px; page-break-inside:auto; border-width:0px; border-spacing:2px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
            <tr style="vertical-align:top">
              <td style="vertical-align:middle;">
                <para style="text-align:center;"><text styleclass="Normal" style="font-family:Consolas; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">iBytesPerLine = (iWidth * 3 + 3) &amp;</text><text style="font-family:Consolas; font-size:10pt; color:#008000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Symbol; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">-</text><text styleclass="Normal" style="font-family:Consolas; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">4;</text></para>
              </td>
            </tr>
          </table></para>
        </td>
        <td style="vertical-align:middle; width:1%;">
          <para><text styleclass="Normal" style="font-family:Consolas; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">(2)</text></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Именно таким образом быстрый доступ к пикселям изображения реализован в классе DSimpleBitmap в примере MFC_GML3.</text></para>
    <para styleclass="Normal" style="margin-top:13px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><anchor id="TTH_SEC4.2" style="font-family:Arial; font-size:10pt; color:#000000;"></anchor><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#003399;" translate="true">4.2</text><text styleclass="Normal" style="font-size:9pt; font-weight:bold; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160;Быстрый способ доступа к пикселям в VCL</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Для того чтобы получить прямой доступ к указателю на пикселы изображения, хранящегося в TBitmap, нужно использовать свойство ScanLine. Это массив указателей на строки пикселей изображения.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Доступ к пикселю с координатами (x, y) осуществляется следующим образом:</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;// pBitmap - указатель на TBitmap обрабатываемого изображения</text></para>
    <para styleclass="Normal" style="margin-left:79px; line-height:1.0; background-color:#ffffff; white-space:nowrap; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Courier; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;pBitmap-&gt;ScanLine[y][x * 3]</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Формат хранящихся в изображении данных задается свойством PixelFormat объекта TBitmap. Для полноцветных изображений (PixelFormat = pf24bit) каждому пикселю соответствует три байта, задающие интенсивности каждого из цветовых каналов - &apos;BGR&apos;.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; background-color:#ffffff; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">Как подобным образом реализовать фильтрацию изображения, показано в примерах SDIApp и DelphiBasis.</text></para>
    <para styleclass="Normal" style="margin-top:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"></para>
    <para styleclass="Normal" style="margin-bottom:6px; margin-left:79px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Consolas; text-decoration:none; vertical-align:baseline; color:#008000;" translate="true">&#32;</text></para>
    <para><line style="height:1px; color:#999999;" /></para>
    <para styleclass="Normal" style="margin-top:10px; margin-bottom:6px; line-height:1.0; page-break-after:auto; tabstops:none;"><text styleclass="Normal" style="font-family:Verdana; font-size:8pt; font-style:italic; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true"> Copyright ©2011 </text><text styleclass="Normal" style="font-family:Verdana; font-size:8pt; font-style:italic; text-decoration:none; vertical-align:baseline; color:#0000ff;" translate="true">C++</text><text styleclass="Normal" style="font-family:Verdana; font-size:8pt; font-style:italic; text-decoration:none; vertical-align:baseline; color:#000000;" translate="true">. All Rights Reserved.</text></para>
  </body>
</topic>
