<?xml version="1.0" encoding="UTF-8"?>
<topic template="Default" lasteditedby="Kot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">Пример создания</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">Пример создания</text></para>
    </header>
    <para style="background-color:#ebebf7;"><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">---------------- </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; font-style:italic; color:#808080;" translate="true">Первичный ключ SQLite</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> -----------------</text><br/><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Сужествует только 2 способа создать первичный ключ, и оба они создают</text><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">-- &#160;первичный ключ в момент создания таблицы</text><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">-- (через ALTER TABLE нельзя создать первичный ключ).</text><br/><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Создаем таблицу с прсотым (односегментным) первичным ключем</text><br/><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#e5fafc;" translate="true">CREATE TABLE </text><text style="font-family:Consolas; font-size:12pt; color:#000000; background-color:#e5fafc;" translate="true">mytable1</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;field1 </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">INTEGER</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">PRIMARY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">KEY AUTOINCREMENT</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">, </text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--по умолчанию AUTOINCREMENT, но лучше указывать AUTOINCREMENT</text></para>
    <para style="background-color:#ebebf7;"><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;-- &#160;если пометить NOT NULL то перестает AUTOINCREMENT</text><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">field2 </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">TEXT</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">NOT</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">NULL</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">, &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; </text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--поле не может быть null</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;field3 </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">BLOB</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">); &#160; </text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">-- </text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#ff0000;" translate="true">ВНИМАНИЕ!!</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> Если первичный ключ простой, то </text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#ff0000;" translate="true">использовать надо именно этот синтаксис</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">, иначе глюки</text><br/><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Создаем таблицу с составным ключем (в данном случае двухсегментным)</text><br/><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">CREATE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">TABLE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">mytable2</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;field1 </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">INTEGER</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">, </text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Эксперимент показал что поле составного ключа </text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#ff0000;" translate="true">не может инкрементится</text><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">field2 </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">TEXT</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">,</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;field3 </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">BLOB</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">,</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">PRIMARY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">KEY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(field1, field2) &#160;</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Составной первичный ключ (сегменты НЕавтоинкрементные)</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">);</text><br/><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">---------------- </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; font-style:italic; color:#808080;" translate="true">Вторичный ключ SQLite</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> -----------------</text><br/><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Сужествует только 2 способа создать вторичный ключ: в момент создания таблицы,</text><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">-- &#160;в момент добавление поля</text><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">-- (через ALTER TABLE нельзя создать вторичный ключ по существующему полю).</text><br/><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Создаем вторичный ключ в момент создания таблицы</text><br/><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">CREATE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">TABLE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">mytable3</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;field1 &#160; &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">INTEGER</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">,</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;mytable2_id </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">INTEGER</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">,</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">PRIMARY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">KEY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(field1, </text><text style="font-family:Consolas; font-size:12pt; color:#000000; background-color:#e5fafc;" translate="true">mytable2_id</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">),</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">FOREIGN</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">KEY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(mytable2_id) </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">REFERENCES</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">mytable2(field1)</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">ON</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">UPDATE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">CASCADE</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> &#160; &#160;--Ограничения ссылочной</text><br/><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true"> &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">ON</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">DELETE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">RESTRICT</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> &#160; -- &#160;целостности (нужно постоянно включать </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Referential_integrity" style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">режим ссылочной целостности</link><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">)</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">);</text></para>
    <para style="background-color:#ebebf7;"><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#e5fafc;" translate="true">CREATE TABLE </text><text style="font-family:Consolas; font-size:12pt; color:#000000; background-color:#e5fafc;" translate="true">mytable4</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;field1 &#160; &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">INTEGER</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">PRIMARY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">KEY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">AUTOINCREMENT</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">,</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;mytable1_id </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">INTEGER</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">,</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;mytable2_id </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">INTEGER</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">,</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">FOREIGN</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">KEY</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">(mytable1_id, mytable2_id) &#160; &#160; &#160; &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Составной вторичный</text><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">REFERENCES</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">mytable3(field1, mytable2_id) &#160; &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">-- &#160;ключ</text><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true"> &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">ON</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">UPDATE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">CASCADE</text><br/><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true"> &#160; &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">ON</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">DELETE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">RESTRICT</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000; background-color:#e5fafc;" translate="true">)</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">;</text><br/><br/><text style="font-family:Consolas; font-size:12pt; font-style:italic; color:#808080;" translate="true">--Создаем вторичный ключ в момент добавления поля</text><br/><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">ALTER</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">TABLE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">mytable3 </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">ADD</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">COLUMN</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">mytable1_id </text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">INTEGER</text><br/><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">REFERENCES</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">mytable1(field1)</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">ON</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">UPDATE</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true">&#32;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">CASCADE</text><br/><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true"> &#160;</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080; background-color:#ffffff;" translate="true">ON</text><text style="font-family:Consolas; font-size:12pt; font-weight:bold; color:#000080;" translate="true"> DELETE RESTRICT</text><text style="font-family:Consolas; font-size:12pt; color:#000000;" translate="true">;</text></para>
    <para style="background-color:#ebebf7;"></para>
  </body>
</topic>
