<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../helpproject.xsl" ?>
<topic template="Default" lasteditedby="Kot" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../helpproject.xsd">
  <title translate="true">Пулы потоков</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">Пулы потоков</text></para>
    </header>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">Создание потока и его разрушение расходуют значительные ресурсы,</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160;при выполении некоторых задачь требуется запускать много непродолжительных потоков,</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160;может получиться ситуация когда на запуск потока тратится больше времени чем на исполнение эффективного кода.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">Решить данную проблему призваны исполнители (executors). Они резервируют потоки и когда необходимо активируют их,</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160;таким образом не тратятся ресурсы на запуск и остановку потоков.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">В </text><text styleclass="Normal" translate="true">java.util.concurrent есть классы реализующие эти пулы.</text></para>
    <para style="margin-top:14px;"><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//ExecutorService реализует возможность запуска большого количества потоков и</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">// &#160;и обслуживать очередь задачь</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Есть 3 вида ExecutorService</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//1 ExecutorService который реализует запуск стольких потоков сколько ему передается задач</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//2 ExecutorService который резервирует указанное количество потоков, и если переданое количество</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">// &#160; &#160;задач становится больше чем количество зарезервированных потоков, то формируется очередь задачь,</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">// &#160; &#160;как только один из потоков освобождается, ему передается на исполнение очередная задача</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//3 ExecutorService который резервирует один поток и формирует очередь задачь, как только поток</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">// &#160; &#160;выполнил очередную задачу, ему передается на выполнение очередная задача.</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Для первого и второго вариантов дорогостоящая процедура запуска потоков выполняется один раз,</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">// &#160;все переданные задачи выполняются только в этих потоках.</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">import</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> java.util.concurrent.*;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Наш класс реализующий интерфейс Runnable</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">class</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">MyCompute</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">implements</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">Runnable</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">static</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-style:italic; vertical-align:baseline; color:#808080;" translate="true">Next_Id</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = 0;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">Id</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Присвоим каждому объекту свой ID</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#800040;" translate="true">MyCompute</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">()</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">Id</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-style:italic; vertical-align:baseline; color:#808080;" translate="true">Next_Id</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-style:italic; vertical-align:baseline; color:#808080;" translate="true">Next_Id</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">++;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;}</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">public</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">void</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#800040;" translate="true">run</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">() &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Метод будет запускаться в новом потоке</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">for</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">=0; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&lt;1000; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">++)</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">try</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">q</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">Id</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//По id можно убедиться что отрабатывают различные потоки</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">Thread</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">.</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-style:italic; vertical-align:baseline; color:#800040;" translate="true">sleep</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(10L); </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Приостанавливает поток на 10 миллисекунд</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;}</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">catch</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> (</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">InterruptedException</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">e</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">) </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Это исключение может бросить Thread.sleep</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">l</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = 0;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;}</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;}</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">public</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">class</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">work</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">public</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">static</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">void</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#800040;" translate="true">main</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">String</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">[] </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">args</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">)</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//1</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Создаем исполнителя задачь потокового пула, количество потоков по количеству задач</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">ExecutorService</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">es1</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">Executors</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">.</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-style:italic; vertical-align:baseline; color:#800040;" translate="true">newCachedThreadPool</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">();</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; </text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true"> &#160; &#160;for</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">=0; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&lt;10; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">++)</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;es1.</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#c00000;" translate="true">execute</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">new</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#800040;" translate="true">MyCompute</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">());</text></para>
    <para style="line-height:1.60;"><text styleclass="Normal" style="font-family:Consolas; font-size:11pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160; es1.</text><text styleclass="Normal" style="font-family:Consolas; font-size:11pt; vertical-align:baseline; color:#c00000;" translate="true">shutdown</text><text styleclass="Normal" style="font-family:Consolas; font-size:11pt; vertical-align:baseline; color:#000000;" translate="true">(); </text><text styleclass="Normal" style="font-family:Consolas; font-size:11pt; vertical-align:baseline; color:#008000;" translate="true">//shutdown пердотвращает передачу новых задач</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; </text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//2</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Создаем исполнителя задачь потокового пула фиксированного размера, если количество задачь</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">// &#160;больше количества потоков, то эти задачи становятся в очередь</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">ExecutorService</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">es2</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">Executors</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">.</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-style:italic; vertical-align:baseline; color:#800040;" translate="true">newFixedThreadPool</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(3); </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Резервируем 3 потока</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">for</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">=0; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&lt;5; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">++)</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">es2</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">.</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#800040;" translate="true">execute</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">new</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#800040;" translate="true">MyCompute</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">());</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; </text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//3</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">//Создаем исполнителя задачь потокового пула из одного потока, если задачь больше одной</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#008000;" translate="true">// &#160;то остальные задачи становятся в очередь</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">ExecutorService</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">es3</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">Executors</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">.</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-style:italic; vertical-align:baseline; color:#800040;" translate="true">newSingleThreadExecutor</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">();</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">for</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">=0; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&lt;2; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">++)</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">es2</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">.</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#800040;" translate="true">execute</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">new</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#800040;" translate="true">MyCompute</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">());</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; </text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">for</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">=0; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&lt;100000; </text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#808080;" translate="true">i</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">++)</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">try</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">hji</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = 0;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">Thread</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">.</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-style:italic; vertical-align:baseline; color:#800040;" translate="true">sleep</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">(1000L);</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;}</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">catch</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> (</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#2d8adf;" translate="true">InterruptedException</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">e</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">)</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;{</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160; &#160;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#0000ff;" translate="true">int</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; font-weight:bold; vertical-align:baseline; color:#808080;" translate="true">l</text><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> = 0;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160; &#160; &#160;}</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">&#32;</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true"> &#160;}</text></para>
    <para><text styleclass="Normal" style="font-family:Consolas; font-size:12pt; vertical-align:baseline; color:#000000;" translate="true">}</text></para>
  </body>
</topic>
